(()=>{"use strict";let e,t,a,r,n,o,l,i=(t,a)=>(void 0===t?(t=0,a=1):a=a||0,t+e()*(a-t)),s=(e,t)=>~~i(e,t),f="000000ffffff-7500009e0000bd0000c70000d10000db0000e60000fa0000ff0000-252422260c1a4b3934d3cdc3ee7749f03000f03c00f78355-1b3b4bb68762d40000e0b299e2725be6e0daeda67deef2f6-120d0e45414a4e342b545873766065e37f44f2bf58ffdd8c-3f3f37d6d6b1e6a100f24500f2e0b6-990d35d52941de2c2cfcd581fff8e8-140f2d3f88c5d72638f22b29f49d37-053c5e1f7a8ca31621bfdbf7db222a-001242032b43136f6337323e3f88c596c8a2d00000fefefa-00a89600bbd802809002c39a05668df0f3bdf7e7cefffaf0-095c84241e052832242e84a68769308eaccbc48e1be1bf9be7eef5-116973183945d82b03f2f2f2f67c1f-17171a401906cceefff0a000f0c630f0d0c0f0d9a5ff0015-1e90ff282e392b9091486abd69b668f7e3d5ff514eff7700-1d2f533cb8a45898c172c1c6ec5c23f5f1ebf8b8a0fdc449-00a5cc31b39335ccc860b3ef6ad0be6cde7e8a99e9a0e6beff73d0ffbff4-336cbc60d7a27fa0c2c8f354e03a2ee5d694e83b83ee8534eee349ffffff-1d1517302332a0b8acb4aab2dd2e26f55b4df7d86ef87d68fcc2cbfcc79efefdfb-00563f247ba033b2ccfb3640fdd692ff8c00ff91afffcc33-3191775b5f97b8b8d1ff6b6cffb5b4ffc145ffe0a0fffffb-887499a24430aba6c4bb697fd66e7ffbc9b2fca13bfcf115fe683c-0505041d34611f487d237ba133b2cce6e6e6fb3640fdd692-003249007ea72932413d5a8080ced79ad1d4ccdbdcee6c4d-031927042a2b1d3557424b54457b9da8dadcf1faeeffbb33-0000001884bf26437fd2292ed9381efefddfffcc00ffffff".split`-`.map((e=>e.match(/.{6}/g).map((e=>"#"+e))));const c=e=>{const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return[parseInt(t[1],16)/255,parseInt(t[2],16)/255,parseInt(t[3],16)/255,1]};let d=e=>l=f[e%f.length],m=(e=1)=>{let t=[];l=[];for(let a=0;a<e;a++){let e=s(f.length);l.push(...f[e]),t.push(e)}return l=(e=>{let t=[...e],a=t.length,r=0;for(;0!=a;)r=~~(i()*a),a--,[t[a],t[r]]=[t[r],t[a]];return t})(l),t},u=(e,t)=>`rgba(${255*e[0]}, ${255*e[1]}, ${255*e[2]}, ${t||e[3]||1})`,b={};const g={width:5*window.artworkWidth,height:5*window.artworkHeight,colorSpace:"display-p3"},h=(e,t,a={})=>{let r={};r.canvas=D.getElementById(t)||D.createElement("canvas"),r.context=r.canvas.getContext(e,{colorSpace:g.colorSpace,alpha:!0,...a});let{canvas:n,context:o}=r;return r.setSize=(e,t)=>{let a=e||g.width,o=t||g.height,l=a/o,i=e||W.artworkWidth,s=t||W.artworkHeight;r.density=M.min(W.devicePixelRatio,2),i<s*l?(r.width=i,r.height=i/l,r.scale=i/a):(r.width=s*l,r.height=s,r.scale=s/o),n.width=~~(r.width*r.density),n.height=~~(r.height*r.density);let f=n.style;f.width=`${r.width}px`,f.height=`${r.height}px`,f.imageRendering="pixelated"},r.save=e=>{n.toBlob((t=>{let a=URL.createObjectURL(t),r=D.createElement("a");r.href=a,r.download=`${W.myPubKey}-${W.signatures.length}.png`,r.click(),e&&e()}),"image/png",1)},r.getImage=e=>n.toDataURL("image/png"),r.destroy=e=>{D.getElementById(t)||(r.width=r.height=n.width=n.height=1,r.clear(),n.remove(),delete r.canvas,delete r.context,n=o=r=null)},r},p=e=>{let t=h("2d",e+"-2d"),{context:a}=t,r={fill:!1,stroke:!1,blend:"source-over"},n=(e,t,n)=>{r[e]=u(t,n),a[`${e}Style`]=r[e]},o=e=>{r.fill&&a.fill(),r.stroke&&a.stroke()};return t.adjustDensity=e=>a.scale(t.density,t.density),t.draw=(e,r)=>{a.save(),t.adjustDensity();let n=e(t,r);return a.restore(),n},t.blendMode=e=>{r.blend=e,a.globalCompositeOperation=e},t.setOpacity=e=>a.globalAlpha=e,t.clear=e=>a.clearRect(0,0,t.width*t.density,t.height*t.density),t.fill=(e,t)=>n("fill",e,t),t.stroke=(e,t)=>n("stroke",e,t),t.noFill=e=>r.fill=!1,t.noStroke=e=>r.stroke=!1,t.strokeWeight=e=>a.lineWidth=e*((t.scale+t.scale)/2),t.translate=(e,r)=>a.translate(e*t.scale,r*t.scale),t.rotate=e=>a.rotate(e*M.PI/180),t.setScale=(e,t)=>a.scale(e,t||e),t.push=e=>a.save(),t.pop=e=>a.restore(),t.shape=(e,r,n,l,i)=>{a.beginPath(),a[e](r*t.scale,n*t.scale,l*t.scale,(i||l)*t.scale,0,0,2*M.PI),o()},t.rect=(e,a,r,n)=>t.shape("rect",e,a,r,n),t.ellipse=(e,a,r,n)=>t.shape("ellipse",e,a,M.abs(r),M.abs(n)),t.line=(e,r)=>{a.beginPath(),a.moveTo(e[0]*t.scale,e[1]*t.scale),a.lineTo(r[0]*t.scale,r[1]*t.scale),a.stroke()},t.polygon=(e,r=!0)=>{a.beginPath(),a.moveTo(e[0][0]*t.scale,e[0][1]*t.scale);for(let r of e)a.lineTo(r[0]*t.scale,r[1]*t.scale);r&&a.lineTo(e[0][0]*t.scale,e[0][1]*t.scale),o()},t.curvedPolygon=(e,r=!0)=>{if(e.length>3){let n=[...e];r&&n.push(e[0],e[1],e[2]);let l,i=[];for(a.beginPath(),a.moveTo(n[1][0]*t.scale,n[1][1]*t.scale),l=1;l+2<n.length;l++){let e=n[l];i[0]=[e[0],e[1]],i[1]=[e[0]+(n[l+1][0]-n[l-1][0])/6,e[1]+(n[l+1][1]-n[l-1][1])/6],i[2]=[n[l+1][0]+(n[l][0]-n[l+2][0])/6,n[l+1][1]+(n[l][1]-n[l+2][1])/6],i[3]=[n[l+1][0],n[l+1][1]],a.bezierCurveTo(i[1][0]*t.scale,i[1][1]*t.scale,i[2][0]*t.scale,i[2][1]*t.scale,i[3][0]*t.scale,i[3][1]*t.scale)}o()}},t.drawPoints=e=>{a.beginPath();for(let r=e.length-1;r>=0;r--)a.rect(e[r][0]*t.scale,e[r][1]*t.scale,e[r][2]*t.scale,e[r][2]*t.scale);a.fill()},t.drawTexture=e=>{a.beginPath();for(let r=e.length-1;r>=0;r--)a.ellipse(e[r][0]*t.scale,e[r][1]*t.scale,e[r][2]*t.scale,e[r][2]*t.scale,0,0,2*M.PI);a.fill()},t.image=(e,r=0,n=0,o,l)=>{o?a.drawImage(e,r*t.scale,n*t.scale,o*t.scale,(l||o)*t.scale):a.drawImage(e,r*t.scale,n*t.scale)},t.gradient=(e,n,o,l)=>{let i=a.createLinearGradient(n[0]*t.scale,n[1]*t.scale,o[0]*t.scale,o[1]*t.scale),s=1/l.length,f=0;for(let e of l)i.addColorStop(f,u(e)),f+=s;r[e]=i,a[`${e}Style`]=r[e]},t};let E;Math.sqrt(4),Math.sqrt(4);let y="#version 300 es",T=`${y}\nprecision highp float;in vec2 position;out vec4 color;uniform sampler2D image;uniform vec2 resolution;`,R=e=>{let t=2*M.PI,a=e=>e%1?e:e+".",r=(e=t)=>`vec3(${[0,0,0].map((t=>a(i(e))))})`,n=(e=1)=>`vec3(${[0,0,0].map((t=>a(e*2**(i(.6)-.3))))})`;return`float wobbly(vec3 p){return dot(sin(p.xyz*${n()}+2.*sin(p.yzx*${n()}+${r()})+${r()}),sin(p.zyx*${n()}+3.*sin(p.zxy*${n()}+${r()})+${r()}));}`};const v=`${y}\nin vec2 a_position,a_texCoord;uniform mat3 u_textureMatrix;out vec2 position;void main(){position=(u_textureMatrix*vec3(a_texCoord,1)).xy;gl_Position=vec4(a_position*2.-vec2(1),0,1);}`;let x=e=>`${T}${e}float map(float v,float a,float b,float c,float d){return c+(v-a)*(d-c)/(b-a);}float getNoise(int o,float p,float f,vec3 c){float a=1.;float m=0.;float s=0.;for(int i=0;i<o;++i){s+=a*wobbly(c*f);f*=2.;m+=a;a*=p;}return (s/m)*.5+.5;}uniform float seed,noiseSize,frequency;uniform bool on;void main(){vec2 i=position;if(on){float x=getNoise(2,.6,2.,vec3(position.xy,seed+3e4)),y=getNoise(4,.4,frequency,vec3(position.xy,seed))*2.-1.,f=getNoise(4,.4,frequency,vec3(position.xy,seed+1e4))*2.-1.;i+=vec2(y,f)/noiseSize*x/10.;if(i.x<0.)i.x=abs(i.x);if(i.y<0.)i.y=abs(i.y);if(i.x>1.)i.x=1.-i.x+1.;if(i.y>1.)i.y=1.-i.y+1.;}color=texture(image,i);}`;const w=e=>({name:"noise",vertex:v,fragment:x(R()),uniforms:[{name:"seed",type:"uniform1f"},{name:"noiseSize",type:"uniform1f"},{name:"frequency",type:"uniform1f"},{name:"on",type:"uniform1i"}]});let A=(e,t,a)=>{let r=e.createShader(a);return e.shaderSource(r,t),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS)||(console.log(e.getShaderInfoLog(r)),e.deleteShader(r)),r},_=Float32Array,I=e=>{let t=e.createTexture();return e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.MIRRORED_REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.MIRRORED_REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),t};const S={name:"post",vertex:v,fragment:`${T}uniform float brightness,contrast,saturation;mat4 v(float m){return mat4(1,0,0,0,0,1,0,0,0,0,1,0,m,m,m,1);}mat4 m(float m){float b=(1.-m)/2.;return mat4(m,0,0,0,0,m,0,0,0,0,m,0,b,b,b,1);}mat4 b(float m){vec3 b=vec3(.3086,.6094,.082);float n=1.-m;vec3 f=vec3(b.x*n);f+=vec3(m,0,0);vec3 v=vec3(b.y*n);v+=vec3(0,m,0);vec3 r=vec3(b.z*n);r+=vec3(0,0,m);return mat4(f,0,v,0,r,0,0,0,0,1);}void main(){color=v(brightness)*m(contrast)*b(saturation)*texture(image,position);}`,uniforms:[{name:"brightness",type:"uniform1f"},{name:"contrast",type:"uniform1f"},{name:"saturation",type:"uniform1f"}]},P=(e,t=[],a)=>{let r,n=p(a),o={engine:n,blendMode:"source-over",completed:!1};return n.setSize(),t.length&&(r=((e,t)=>{let a=h("webgl2",t+"-webgl",{colorSpace:"display-p3",powerPreference:"high-performance",preserveDrawingBuffer:!0}),{context:r,canvas:n}=a;if(!r)return a;"drawingBufferColorSpace"in r&&(r.drawingBufferColorSpace=g.colorSpace),"unpackColorSpace"in r&&(r.unpackColorSpace=g.colorSpace);let o,l=[],i=(e,t)=>((e,t,a,r,n,o=1)=>{let{width:l,height:i}=e.canvas,s=new _([0,0,1,0,0,1,0,1,1,0,1,1]),f=((e,t,a)=>{let r=e.createProgram(),n=A(e,t,e.VERTEX_SHADER),o=A(e,a,e.FRAGMENT_SHADER);return e.attachShader(r,n),e.attachShader(r,o),e.linkProgram(r),e.getProgramParameter(r,e.LINK_STATUS)||e.deleteProgram(r),r})(e,t,a);e.useProgram(f);let c=e.getAttribLocation(f,"a_position"),d=e.getAttribLocation(f,"a_texCoord"),m=e.getUniformLocation(f,"u_textureMatrix"),u=new _([1,0,0,0,1,0,0,0,1]),b=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,b),e.vertexAttribPointer(c,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(c),e.vertexAttribPointer(d,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(d),e.uniformMatrix3fv(m,!1,u),e.bufferData(e.ARRAY_BUFFER,s,e.STATIC_DRAW);let g={};for(let t of r)g[t.name]={type:t.type,location:e.getUniformLocation(f,t.name),texture:t.texture};let h=[];for(let t=0;t<o;t++)h.push(I(e));let p=e.createFramebuffer();return e.bindFramebuffer(e.FRAMEBUFFER,p),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,l,i,0,e.RGBA,e.UNSIGNED_BYTE,null),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,h[0],0),{name:n,getTexture:(e=0)=>h[e],draw(t){e.useProgram(f);let a=1;for(let[r,n]of Object.entries(t))n=Array.isArray(n)?n:[n],g[r].texture?(e.activeTexture(e.TEXTURE0+a),e.bindTexture(e.TEXTURE_2D,h[a]),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,...n),e[g[r].type](g[r].location,a),a++):e[g[r].type](g[r].location,...n);e.bindBuffer(e.ARRAY_BUFFER,b),e.drawArrays(e.TRIANGLES,0,6)},set(){e.bindFramebuffer(e.FRAMEBUFFER,p)},clear(){e.bindFramebuffer(e.FRAMEBUFFER,p),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT)},reset(){({width:l,height:i}=e.canvas),p&&(e.bindTexture(e.TEXTURE_2D,h[0]),e.bindFramebuffer(e.FRAMEBUFFER,p),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,l,i,0,e.RGBA,e.UNSIGNED_BYTE,null),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,h[0],0))}}})(r,e.vertex,e.fragment,[{type:"uniform1i",name:"image"},{type:"uniform2f",name:"resolution"},...e.uniforms],e.name,t);r.clear(r.COLOR_BUFFER_BIT),r.disable(r.DEPTH_TEST),r.enable(r.BLEND),r.blendFunc(r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,r.NONE),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!0);for(let t=0;t<e.length;t++)l.push(i(e[t],e[t].textures));o=i(S);let s=a.setSize;return a.setSize=e=>{s(),r.viewport(0,0,a.width*a.density,a.height*a.density),[...l,o].forEach((e=>e.reset()))},a.draw=(e,t)=>{let{uniforms:a,blendModeGL:n,post:i={}}=t,{brightness:s=0,contrast:f=1,saturation:c=1}=i,d={image:0,resolution:[g.width,g.height]};for(let t=0;t<l.length;t++)r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,l[t].getTexture()),0===t&&r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,e),t+1<l.length?l[t+1].set():o.set(),l[t].draw({...d,...a[l[t].name]});o.set(),r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,o.getTexture()),r.bindFramebuffer(r.FRAMEBUFFER,null),o.draw({...d,brightness:s,contrast:f,saturation:c})},a.clear=e=>{r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT),[...l,o].forEach((e=>e.clear()))},a})(t,a),r.setSize(),o.engine=r,o.engine2D=n),o.draw=t=>{let a=n.draw(e,{...t,clear:r.clear});r&&r.draw(n.canvas,a);for(let[e,t]of Object.entries(a))o[e]=t},o.setSize=e=>{n.setSize(),r.setSize()},o.destroy=e=>{n.destroy(),r&&r.destroy()},o},U=e=>{let t=e.PRNG.randomElementInArray(l),a=e.PRNG.randomElementInArray(l);return{draw(r){r.fill(e.fill),r.stroke(e.stroke),W.params.stroke&&t&&r.stroke(c(t)),W.params.fill&&a&&r.fill(c(a)),e.draw(r)}}},F=(e,t,a,r,n,o,l,i,s,f)=>{let c;return c=i?[[0,0],[r,n],[0,n]]:[[0,0],[r,0],[r,n]],U({PRNG:e,fill:o,stroke:l,draw(e){e.push(),e.translate(t,a),e.translate(r/2,n/2),e.setScale(s?-1:1,f?-1:1),e.translate(-r/2,-n/2),e.polygon(c),e.pop()}})},B=(e,t,a,r,n,o,l,i,s,f)=>{let c;return c=i?[[0,n],[r/2,0],[r,n]]:[[0,0],[r,n/2],[0,n]],U({PRNG:e,fill:o,stroke:l,draw(e){e.push(),e.translate(t,a),e.translate(r/2,n/2),e.setScale(s?-1:1,f?-1:1),e.translate(-r/2,-n/2),e.polygon(c),e.pop()}})},k=(e,t,a,r,n,o,l)=>U({PRNG:e,fill:o,stroke:l,draw(e){e.rect(t,a,r,n)}}),L=(e,t,a,r,n,o,l)=>{let i=r/2,s=n/2;return U({PRNG:e,fill:o,stroke:l,draw(e){e.ellipse(t+i,a+s,i,s)}})},N=(e,t,a,r,n,o,l)=>{let i=[[0,0],[.5*r,.25*n],[r,0],[.75*r,.5*n],[r,n],[.5*r,.75*n],[0,n],[.25*r,.5*n]];return U({PRNG:e,fill:o,stroke:l,draw(e){e.push(),e.translate(t,a),e.polygon(i),e.pop()}})};let C=(e,t,a,r,n=1,o=1,i=!1)=>{let s=t,f=a,d=0;r||(t/=2,a/=2,d=.05*M.min(t,a),s=t-2*d,f=a-2*d);let m=((e="tx piter")=>{let t,a,r,n,o,l;t=a=r=n=o=l=null,a=Uint32Array.from([0,1,r=n=2,3].map((t=>parseInt(e.substr(8*t+2,8),16)))),t=e=>(n=a[3],a[3]=a[2],a[2]=a[1],a[1]=r=a[0],n^=n<<11,a[0]^=n^n>>>8^r>>>19,a[0]/2**32);let i=(e,a)=>(void 0===e?(e=0,a=1):a=a||0,e+t()*(a-e)),s=(e,t)=>~~i(e,t);return{random:i,randomInt:s,randomElementInArray:e=>e[s(e.length)],randomGaussian:(e=1,t=0)=>{if(l){l=!1;let a=o;return o=null,t+e*a}{let a=0,r=0,n=0;do{a=i(-1,1),r=i(-1,1),n=a*a+r*r}while(n>=1||0===n);let s=M.sqrt(-2*M.log(n)/n);return o=r*s,l=!0,t+e*(a*s)}},shuffleArray:e=>{let t=[...e],a=t.length,r=0;for(;0!=a;)r=~~(i()*a),a--,[t[a],t[r]]=[t[r],t[a]];return t},chance:e=>i()<e}})(e),u=m.randomElementInArray(l),b=m.randomElementInArray(l),g=s/n,h=f/o,E=[M.max(0,m.randomInt(n)-1),M.max(0,m.randomInt(o)-1)],y=[m.randomInt(n-E[0])+1,m.randomInt(o-E[1])+1],T=m.chance(.5)?F:B;m.chance(.1)?T=N:m.chance(.1)?T=L:m.chance(.1)&&(T=k);let R=E[0]*g,v=E[1]*h,x=y[0]*g,w=y[1]*h;i&&(R+=m.randomGaussian(.0062*s),v+=m.randomGaussian(.0062*f));let A=m.randomInt(1,7)*m.randomInt(3,7),_=m.randomInt(1,7)*m.randomInt(3,7),I=x/A,S=w/_,P=M.min(I,S)*m.random(.5);I=(x-P)/A,S=(w-P)/_;let U=[],D=(m.randomInt(3),Array.from({length:m.randomInt(3)+1},(e=>m.randomInt(2,A)))),C=Array.from({length:m.randomInt(A/2)+1},(e=>m.randomInt(A))),G=Array.from({length:m.randomInt(_/2)+1},(e=>m.randomInt(_))),$=m.chance(.5),O=m.chance(.5),X=O?[1,1,1]:[0,0,0],z=O?[0,0,0]:[1,1,1];W.params.fill&&(X=c(u)),W.params.stroke&&(z=c(b));let q=1;for(let e=0;e<_;e+=1)for(let t=0;t<A;t+=1)D.every((e=>q%e))&&U.push(T(m,m.randomGaussian(.5,R+I*t+P),m.randomGaussian(.5,v+S*e+P),m.randomGaussian(.5,I-P),m.randomGaussian(.5,S-P),X,z,$,!C.every((e=>q%e)),!G.every((e=>q%e)))),q+=1;return{fillColor:u,strokeColor:b,background:O?"black":"white",getImage(){let e=p({willReadFrequently:!0});e.setSize(t,a),e.draw((t=>{e.translate(d,d),e.strokeWeight(1),this.draw(e)}));let r=e.getImage();return e.destroy(),r},draw(e){for(let t of U)t.draw(e)}}},G=(e,t,a,r)=>{let n=[];return 0!==e&&(n=[8,8,!0]),d(~~(e/25)),C(t,a||window.artworkWidth,r||window.artworkHeight,!0,...n)};const $=C;(l=>{window.W=window,W.D=document,W.S=D.body.style,W.M=Math,W.stamp=$,W.stampWithIndex=G;let f,c,u,h,p,y,T,R,v=(e=>{let t=[];return{addLayers(e){t.push(...e)},render(e){let a=!0;for(let r of t)r.completed||(a=!1,r.draw(e));return a},reset(){t.forEach((e=>e.destroy())),t=[]},save(e){let a=t[t.length-1];a&&a.engine&&a.engine.save(e)},getImage(){let e=t[t.length-1];if(e&&e.engine)return e.engine.getImage()}}})(),x=e=>{R?console.log(`Completed render after ${f} frames in ${(h-u)/1e3}s`):(T=W.requestAnimationFrame(x),h=e,y=h-p,y>c&&(p=h-y%c,R=v.render({frameCount:f}),f+=1))},A=l=>{((l="tx piter")=>{e=t=a=r=n=o=null,t=Uint32Array.from([0,1,a=r=2,3].map((e=>parseInt(l.substr(8*e,8),16)))),e=e=>(r=t[3],t[3]=t[2],t[2]=t[1],t[1]=a=t[0],r^=r<<11,t[0]^=r^r>>>8^a>>>19,t[0]/2**32)})(W.myPubKey),W,b={palette:m(s(5)+1),background:[0,0,0],padding:.1,exposure:s(30,100),noiseSize:i(4,12)/50,frequency:s(4,9)/5,seed:i()}};A(),W.render=e=>{T&&W.cancelAnimationFrame(T),A(),E=null,v.reset(),f=0,c=1e3/60,p=W.performance.now(),u=p,R=!1,v.addLayers((e=>{let{background:t,exposure:a,seed:r,frequency:n,noiseSize:o}=b,{width:l,height:i}=g,{abstract:s}=W.params,f=s?.3:.05;f*=M.min(l,i);let c=l-2*f,m=i-2*f,u=$(window.myPubKey,c,m,!0),h=-1,p=new Event("rendered"),E=!1;return[P(((e,{clear:t})=>{e.clear();let a=M.min(W.params.upToPubKey,W.signatures.length)-1;return e.strokeWeight(10),h<a?(e.translate(f,f),e.setOpacity(s&&h>25?.7:1),-1===h?u.draw(e):(d(~~(h/25)),$(W.signatures[h].pubKey,c,m,!0,8,8,!0).draw(e)),E=!1,h+=1):h>a?(t(),h=-1,E=!1):E||(W.dispatchEvent(p),E=!0),{completed:!1,post:{saturation:1.4,contrast:s?1.5:1,brightness:s?-.1:0},uniforms:{noise:{on:s,seed:r+h/500,noiseSize:o,frequency:n}}}}),[w(),w()],"artwork")]})()),x()},W.getLastRender=e=>v.getImage(),navigator.userAgent.includes("HeadlessChrome")||(W.addEventListener("resize",W.render),W.addEventListener("keydown",(e=>"s"===e.key?v.save():"")))})()})();